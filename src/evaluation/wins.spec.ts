import { describe, expect, test } from "bun:test";
import { wins } from "./wins";

describe("wins", () => {
  test("should return all winning lines for win-length = size", () => {
    const expected = [
      "111000000",
      "000111000",
      "000000111",
      "100100100",
      "010010010",
      "001001001",
      "100010001",
      "001010100",
    ].map((x) => BigInt("0b" + x));
    const actual = wins(3, 3);
    expect(actual.sort()).toEqual(expected.sort());
  });

  test("should return all winning lines for win-length < size", () => {
    const expected = [
      "000000011",
      "000001001",
      "000000110",
      "000010010",
      "000011000",
      "000100100",
      "000110000",
      "001001000",
      "011000000",
      "010010000",
      "110000000",
      "100100000",
      "000010001",
      "000001010",
      "000100010",
      "000010100",
      "010001000",
      "001010000",
      "100010000",
      "010100000",
    ].map((x) => BigInt("0b" + x));
    const actual = wins(3, 2);
    expect(actual.sort()).toEqual(expected.sort());
  });

  test("should return all winning lines for larger boards", () => {
    const expected = [
      "0000000000000000000001111",
      "0000000001000010000100001",
      "0000000000000000000011110",
      "0000000010000100001000010",
      "0000000000000000111100000",
      "0000000100001000010000100",
      "0000000000000001111000000",
      "0000001000010000100001000",
      "0000000000011110000000000",
      "0000010000100001000010000",
      "0000000000111100000000000",
      "0000100001000010000100000",
      "0000001111000000000000000",
      "0001000010000100001000000",
      "0000011110000000000000000",
      "0010000100001000010000000",
      "0111100000000000000000000",
      "0100001000010000100000000",
      "1111000000000000000000000",
      "1000010000100001000000000",
      "0000001000001000001000001",
      "0000000001000100010001000",
      "0000010000010000010000010",
      "0000000010001000100010000",
      "0100000100000100000100000",
      "0000100010001000100000000",
      "1000001000001000001000000",
      "0001000100010001000000000",
    ].map((x) => BigInt("0b" + x));
    const actual = wins(5, 4);
    expect(actual.sort()).toEqual(expected.sort());
  });
});
