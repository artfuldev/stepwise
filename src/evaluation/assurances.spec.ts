import { describe, expect, test } from "bun:test";
import { assurances } from "./assurances";

describe("assurances", () => {
  test("should return all assurances for size-1", () => {
    const expected = [
      ["101000000", "010000000"],
      ["000101000", "000010000"],
      ["000000101", "000000010"],
      ["100000100", "000100000"],
      ["010000010", "000010000"],
      ["001000001", "000001000"],
      ["100000001", "000010000"],
      ["001000100", "000010000"],
    ].map(([x, y]) => [BigInt("0b" + x), BigInt("0b" + y)] as const);
    const actual = assurances(3, 2);
    expect(actual.sort()).toEqual(expected.sort());
  });

  test("should return all assurances for larger boards", () => {
    const expected = [
      ["0000000000000000000001001", "0000000000000000000000110"],
      ["0000000001000000000000001", "0000000000000010000100000"],
      ["0000000000000000000010010", "0000000000000000000001100"],
      ["0000000010000000000000010", "0000000000000100001000000"],
      ["0000000000000000100100000", "0000000000000000011000000"],
      ["0000000100000000000000100", "0000000000001000010000000"],
      ["0000000000000001001000000", "0000000000000000110000000"],
      ["0000001000000000000001000", "0000000000010000100000000"],
      ["0000000000010010000000000", "0000000000001100000000000"],
      ["0000010000000000000010000", "0000000000100001000000000"],
      ["0000000000100100000000000", "0000000000011000000000000"],
      ["0000100000000000000100000", "0000000001000010000000000"],
      ["0000001001000000000000000", "0000000110000000000000000"],
      ["0001000000000000001000000", "0000000010000100000000000"],
      ["0000010010000000000000000", "0000001100000000000000000"],
      ["0010000000000000010000000", "0000000100001000000000000"],
      ["0100100000000000000000000", "0011000000000000000000000"],
      ["0100000000000000100000000", "0000001000010000000000000"],
      ["1001000000000000000000000", "0110000000000000000000000"],
      ["1000000000000001000000000", "0000010000100000000000000"],
      ["0000001000000000000000001", "0000000000001000001000000"],
      ["0000000001000000000001000", "0000000000000100010000000"],
      ["0000010000000000000000010", "0000000000010000010000000"],
      ["0000000010000000000010000", "0000000000001000100000000"],
      ["0100000000000000000100000", "0000000100000100000000000"],
      ["0000100000000000100000000", "0000000010001000000000000"],
      ["1000000000000000001000000", "0000001000001000000000000"],
      ["0001000000000001000000000", "0000000100010000000000000"],
    ].map(([x, y]) => [BigInt("0b" + x), BigInt("0b" + y)] as const);
    const actual = assurances(5, 3);
    expect(actual.sort()).toEqual(expected.sort());
  });
});
